<% @title = "Post ページ" %>
<h1><%= @title %></h1>
<%= form_with model: Post.new, url:"/account/post/"+@m.id.to_s do |a| %>
    <%=@m.id%>
    <div>
    <%= a.text_area :post , :placeholder => "今日はどんな気分ですか？",:size => "100" , required: true %>
    <%= a.submit "投稿する"%>
    </div>
    <div class="col-md-9  p0 m0">
        <div class=" row m0">
            <div class="col-md-2 pt-2">
                <%= react_component("GetImage", { value: @current_member.face_photo_path.url }, prerender: true) %>
            </div>
            <div class="col-md-10">
                <%= form_with model: Post.new, url:"/account/post/"+@m.id.to_s do |a| %>
                    <div class="text-right">
                        <%= a.text_area :post , :placeholder => "今日はどんな気分ですか？" ,class: "form-control ",style:"height: 100px;", required: true %>
                        <%= a.submit "投稿" ,class: "button mt-2 mb-2"%>
                    </div>
                <%end%>
            </div>
        </div>

    <%@members.each do |m|%>
        <%m.posts.each do |post|%>    
            <div class="p0">
            <hr />
                <div class="row m0">
                    <div class="col-md-2 pt-2">
                        <%= react_component("GetImage", { value: m.face_photo_path.url }, prerender: true) %>
                    </div>


                    <div class="col-md-10 text-left pt-2">
                        <span class="s"><ruby>
                                  <%=m.last_name%><rt><%=m.last_name_phonetic%></rt>
                            &nbsp;<%=m.first_name%><rt><%=m.first_name_phonetic%></rt>
                        </ruby></span>
                        <span class="ss"> @<%=m.one_word_comment%></span> 
                        <span class="ss orange"> <%=post.created_at%></span> 
                        
                        <p class="mt-2 mb-2">
                            <%= react_component("Content", { value: post.post }, prerender: true) %>
                        </p>


                        <div class="text-right inline_form">
                        
                            <%= form_with model: Reply.new, url:"/account/reply/"+post.id.to_s do |a| %>
                                <%= a.text_field :reply, :placeholder => "コメントを残しましょう！",:size => "50",class: "form-control", required: true %>
                                <%= a.submit "返信",class: "button mt-2 mb-2"%>   
                            <%end%>
                            

                            <%= button_to 'いいね',"/account/post_like/"+post.id.to_s, class: "button" %>
                            <%# <%if post.like!=nil then%>
                                <%# <span class="ss"><%= react_component("Content", { value: post.like }, prerender: true) %>
                                <%# </span> %>
                            <%# <%end%>
                            <%if @current_member.id==post.member_id then%>
                                <%= form_with model: Post.new, url: "/account/delete/"+post.id.to_s do |f| %>
                                <%= f.submit "削除",class: "button" %>
                                <%end%> 
                            <%end%>
                        </div>
                    </div>
                </div>
                
                
                
            </div>
            <p>
            <p>
            <div>

            <%if post.like!=nil then%>
                like:<%=post.like%>
            <%end%>
            
            <%= form_with model: Reply.new, url:"/account/reply/"+post.id.to_s do |a| %>
            <%= a.text_field :reply, :placeholder => "コメントを残しましょう！",:size => "50" , required: true %>
            <%= a.submit "投稿する"%>       
            <%end%>
            <%= button_to 'いいね',"/account/post_like/"+post.id.to_s %>
            
            <%post.replies.each do |reply|%>
            <span>
            コメント:<%=reply.reply%>いいね:<%=reply.like%>
            <%= button_to 'いいね',"/account/reply_like/"+reply.id.to_s %>
            </span>
            <%end%>

        
    <%end%>
<%end%>
